<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=320,height=480">
    <title>Tamagitto</title>
    <link rel="stylesheet" href="styles/popup.css">
</head>
<body>
    <div id="app-container">
        <!-- Authentication State -->
        <div id="auth-screen" class="screen">
            <div class="welcome">
                <img src="icons/mascot.png" alt="Tamagitto mascot" class="mascot-image">
                <h2>Welcome to Tamagitto!</h2>
                <p>Connect your GitHub to start caring for your code pet.</p>
                <button id="github-login-btn" class="primary-button">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path>
                    </svg>
                    Connect GitHub
                </button>
            </div>
        </div>
        
        <!-- Repository Selection State -->
        <div id="repo-selection-screen" class="screen hidden">
            <div class="header">
                <h3>Choose Repository</h3>
                <button id="logout-btn" class="icon-button">⚙️</button>
            </div>
            <div class="search-container">
                <input type="text" id="repo-search" placeholder="Search repositories..." class="search-input">
            </div>
            <div id="repo-list" class="repo-list">
                <!-- Dynamically populated -->
            </div>
        </div>
        
        <!-- Entity Dashboard State -->
        <div id="entity-screen" class="screen hidden">
            <div class="header">
                <h3 id="entity-name">CodeBuddy</h3>
                <div class="header-actions">
                    <button id="settings-btn" class="icon-button">⚙️</button>
                    <button id="info-btn" class="icon-button">ℹ️</button>
                </div>
            </div>
            
            <div class="entity-display">
                <div class="entity-visual">
                    <img id="entity-image" src="icons/default-entity.png" alt="Your code pet" class="entity-image">
                    <div class="health-indicator">
                        <div class="health-bar">
                            <div id="health-fill" class="health-fill"></div>
                        </div>
                        <span id="health-score">100</span>%
                    </div>
                </div>
                
                <div class="entity-status">
                    <div class="status-item">
                        <span class="label">Status:</span>
                        <span id="entity-status" class="status-badge">Thriving</span>
                    </div>
                    <div class="status-item">
                        <span class="label">Repository:</span>
                        <span id="repo-name">username/repo</span>
                    </div>
                </div>
            </div>
            
            <div class="recent-activity">
                <h4>Recent Activity</h4>
                <div id="activity-list" class="activity-list">
                    <!-- Dynamically populated -->
                </div>
            </div>
            
            <div class="actions">
                <button id="view-history-btn" class="secondary-button">
                    View Health History
                </button>
                <button id="change-repo-btn" class="secondary-button">
                    Change Repository
                </button>
            </div>
        </div>
        
        <!-- Entity Death State -->
        <div id="death-screen" class="screen hidden">
            <div class="death-notice">
                <img src="icons/rip.png" alt="RIP" class="rip-image">
                <h3>Your entity has passed away</h3>
                <p>Don't worry! You can create a new one after the cooldown period.</p>
                <div class="cooldown-timer">
                    <span id="cooldown-time">23:45:12</span>
                </div>
                <button id="create-new-btn" class="primary-button" disabled>
                    Create New Entity
                </button>
            </div>
        </div>
        
        <!-- Loading States -->
        <div id="loading-overlay" class="loading-overlay hidden">
            <div class="spinner"></div>
            <p id="loading-message">Loading...</p>
        </div>
        
        <!-- Error Messages -->
        <div id="error-container" class="error-container hidden">
            <div class="error-content">
                <span class="error-text" id="error-message"></span>
                <button class="error-close" id="error-close">&times;</button>
            </div>
        </div>
    </div>
    
    <script src="popup.js"></script>
</body>
</html>